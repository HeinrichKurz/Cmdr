<!DOCTYPE html>
<html lang="en-US">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Hooks | Cmdr</title>
		<meta name="generator" content="VuePress 1.5.2" />

		<meta
			name="description"
			content="Fully extensible command console for Roblox developers."
		/>
		<link
			rel="preload"
			href="/Cmdr/legacy/assets/css/0.styles.2ead6260.css"
			as="style"
		/>
		<link
			rel="preload"
			href="/Cmdr/legacy/assets/js/app.af2239d2.js"
			as="script"
		/>
		<link
			rel="preload"
			href="/Cmdr/legacy/assets/js/4.68a2b75a.js"
			as="script"
		/>
		<link
			rel="preload"
			href="/Cmdr/legacy/assets/js/22.a05771ae.js"
			as="script"
		/>
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/1.bed6c911.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/10.ba0a0e28.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/11.16f2dfb0.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/12.c6f0b2dc.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/13.e9c793e9.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/14.5962a394.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/15.8ac90f0d.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/16.fdb0d6aa.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/17.a97a422a.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/18.1a1ab819.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/19.6772dc0c.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/2.3662bb70.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/20.9533ad11.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/21.2d4bad1a.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/23.84f259da.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/24.eda0ddc0.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/25.559d37fb.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/26.35a13794.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/27.f61aa865.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/5.44f0610a.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/6.b2c84123.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/7.7f5c7a17.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/8.a3986720.js" />
		<link rel="prefetch" href="/Cmdr/legacy/assets/js/9.79cfbc61.js" />
		<link
			rel="stylesheet"
			href="/Cmdr/legacy/assets/css/0.styles.2ead6260.css"
		/>
	</head>
	<body>
		<div id="app" data-server-rendered="true">
			<div class="theme-container">
				<header class="navbar">
					<div class="sidebar-button">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							aria-hidden="true"
							role="img"
							viewBox="0 0 448 512"
							class="icon"
						>
							<path
								fill="currentColor"
								d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"
							></path>
						</svg>
					</div>
					<a href="/Cmdr/legacy/" class="home-link router-link-active"
						><img src="/Cmdr/legacy/logo.png" alt="Cmdr" class="logo" />
						<span class="site-name can-hide">Cmdr</span></a
					>
					<div class="links">
						<div class="search-box">
							<input
								aria-label="Search"
								autocomplete="off"
								spellcheck="false"
								value=""
							/>
							<!---->
						</div>
						<nav class="nav-links can-hide">
							<div class="nav-item">
								<a href="/Cmdr/legacy/guide/Setup.html" class="nav-link">
									Guide
								</a>
							</div>
							<div class="nav-item">
								<a href="/Cmdr/legacy/api/Cmdr.html" class="nav-link">
									API Reference
								</a>
							</div>
							<div class="nav-item">
								<a href="/Cmdr/legacy/Changelog.html" class="nav-link">
									Changelog
								</a>
							</div>
							<div class="nav-item">
								<a
									href="https://discord.gg/g5PdMxh"
									target="_blank"
									rel="noopener noreferrer"
									class="nav-link external"
								>
									Discord
									<svg
										xmlns="http://www.w3.org/2000/svg"
										aria-hidden="true"
										x="0px"
										y="0px"
										viewBox="0 0 100 100"
										width="15"
										height="15"
										class="icon outbound"
									>
										<path
											fill="currentColor"
											d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"
										></path>
										<polygon
											fill="currentColor"
											points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"
										></polygon></svg
								></a>
							</div>
							<div class="nav-item">
								<a
									href="https://github.com/evaera/Cmdr"
									target="_blank"
									rel="noopener noreferrer"
									class="nav-link external"
								>
									GitHub
									<svg
										xmlns="http://www.w3.org/2000/svg"
										aria-hidden="true"
										x="0px"
										y="0px"
										viewBox="0 0 100 100"
										width="15"
										height="15"
										class="icon outbound"
									>
										<path
											fill="currentColor"
											d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"
										></path>
										<polygon
											fill="currentColor"
											points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"
										></polygon></svg
								></a>
							</div>
							<!---->
						</nav>
					</div>
					<div
						style="
							width: 100%;
							height: auto;
							background-color: red !important;
							position: fixed;
							left: 0;
							text-align: center;
						"
					>
						<span
							style="
								color: white;
								font-size: 16px;
								text-align: center;
								font-weight: bold;
								font-family: Arial, sans-serif;
							"
							>This is the legacy version of the Cmdr website. We recommend
							viewing the
							<a
								href="https://eryn.io/Cmdr/"
								style="
									color: white;
									text-decoration: underline;
									font-weight: bold;
									text-decoration-thickness: 1px;
								"
								>latest documentation</a
							>. If there's something in the new site that's missing in the old,
							please
							<a
								href="https://github.com/evaera/Cmdr/issues/new"
								style="
									color: white;
									text-decoration: underline;
									font-weight: bold;
									text-decoration-thickness: 1px;
								"
								target="_blank"
								>let us know</a
							>.</span
						>
					</div>
				</header>
				<div class="sidebar-mask"></div>
				<aside class="sidebar">
					<nav class="nav-links">
						<div class="nav-item">
							<a href="/Cmdr/legacy/guide/Setup.html" class="nav-link">
								Guide
							</a>
						</div>
						<div class="nav-item">
							<a href="/Cmdr/legacy/api/Cmdr.html" class="nav-link">
								API Reference
							</a>
						</div>
						<div class="nav-item">
							<a href="/Cmdr/legacy/Changelog.html" class="nav-link">
								Changelog
							</a>
						</div>
						<div class="nav-item">
							<a
								href="https://discord.gg/g5PdMxh"
								target="_blank"
								rel="noopener noreferrer"
								class="nav-link external"
							>
								Discord
								<svg
									xmlns="http://www.w3.org/2000/svg"
									aria-hidden="true"
									x="0px"
									y="0px"
									viewBox="0 0 100 100"
									width="15"
									height="15"
									class="icon outbound"
								>
									<path
										fill="currentColor"
										d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"
									></path>
									<polygon
										fill="currentColor"
										points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"
									></polygon></svg
							></a>
						</div>
						<div class="nav-item">
							<a
								href="https://github.com/evaera/Cmdr"
								target="_blank"
								rel="noopener noreferrer"
								class="nav-link external"
							>
								GitHub
								<svg
									xmlns="http://www.w3.org/2000/svg"
									aria-hidden="true"
									x="0px"
									y="0px"
									viewBox="0 0 100 100"
									width="15"
									height="15"
									class="icon outbound"
								>
									<path
										fill="currentColor"
										d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"
									></path>
									<polygon
										fill="currentColor"
										points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"
									></polygon></svg
							></a>
						</div>
						<!---->
					</nav>
					<ul class="sidebar-links">
						<li>
							<section class="sidebar-group depth-0">
								<p class="sidebar-heading open">
									<span>Guide</span>
									<!---->
								</p>
								<ul class="sidebar-links sidebar-group-items">
									<li>
										<a href="/Cmdr/legacy/guide/Setup.html" class="sidebar-link"
											>Setup</a
										>
									</li>
									<li>
										<a
											href="/Cmdr/legacy/guide/Commands.html"
											class="sidebar-link"
											>Commands</a
										>
									</li>
									<li>
										<a href="/Cmdr/legacy/guide/Types.html" class="sidebar-link"
											>Types</a
										>
									</li>
									<li>
										<a
											href="/Cmdr/legacy/guide/Hooks.html"
											aria-current="page"
											class="active sidebar-link"
											>Hooks</a
										>
										<ul class="sidebar-sub-headers">
											<li class="sidebar-sub-header">
												<a
													href="/Cmdr/legacy/guide/Hooks.html#beforerun"
													class="sidebar-link"
													>BeforeRun</a
												>
											</li>
											<li class="sidebar-sub-header">
												<a
													href="/Cmdr/legacy/guide/Hooks.html#afterrun"
													class="sidebar-link"
													>AfterRun</a
												>
											</li>
										</ul>
									</li>
									<li>
										<a
											href="/Cmdr/legacy/guide/NetworkEventHandlers.html"
											class="sidebar-link"
											>Network Event Handlers</a
										>
									</li>
									<li>
										<a
											href="/Cmdr/legacy/guide/MetaCommands.html"
											class="sidebar-link"
											>Meta-Commands</a
										>
									</li>
								</ul>
							</section>
						</li>
						<li>
							<section class="sidebar-group depth-0">
								<p class="sidebar-heading">
									<span>API Reference</span>
									<!---->
								</p>
								<ul class="sidebar-links sidebar-group-items">
									<li>
										<a
											href="/Cmdr/legacy/api/ArgumentContext.html"
											class="sidebar-link"
											>ArgumentContext</a
										>
									</li>
									<li>
										<a href="/Cmdr/legacy/api/Cmdr.html" class="sidebar-link"
											>Cmdr</a
										>
									</li>
									<li>
										<a
											href="/Cmdr/legacy/api/CmdrClient.html"
											class="sidebar-link"
											>CmdrClient</a
										>
									</li>
									<li>
										<a
											href="/Cmdr/legacy/api/CommandContext.html"
											class="sidebar-link"
											>CommandContext</a
										>
									</li>
									<li>
										<a
											href="/Cmdr/legacy/api/Dispatcher.html"
											class="sidebar-link"
											>Dispatcher</a
										>
									</li>
									<li>
										<a
											href="/Cmdr/legacy/api/Registry.html"
											class="sidebar-link"
											>Registry</a
										>
									</li>
									<li>
										<a href="/Cmdr/legacy/api/Util.html" class="sidebar-link"
											>Util</a
										>
									</li>
								</ul>
							</section>
						</li>
					</ul>
				</aside>
				<main class="page">
					<div class="theme-default-content content__default">
						<h1 id="hooks">
							<a href="#hooks" class="header-anchor">#</a> Hooks
						</h1>
						<p>
							Hooks are callback functions that you can register which
							<em>hook</em> into the command execution process. Hooks are
							extremely useful: they can be used for implementing a custom
							permission system, logging commands, or overriding command output.
						</p>
						<p>
							Hooks can be registered on both the server and the client. Server
							commands will run server and client hooks, and client commands
							will run only client hooks. Depending on your application, you may
							need to register hooks on one or both. For example, logging may
							only need to be registered on the server, but permissions might
							need to be registered on the client in addition to the server.
						</p>
						<p>
							There can be many hooks of each type, and they are all run until
							one returns a string, which will replace the command response in
							the console.
						</p>
						<h2 id="beforerun">
							<a href="#beforerun" class="header-anchor">#</a> BeforeRun
						</h2>
						<p>
							The callback is passed the CommandContext for the relevant
							command. The hooks are the last thing to run before the command
							itself, so all properties are available.
						</p>
						<p>
							This hook can be used to interrupt command execution (useful for
							permissions) by returning a string. The returned string will
							replace the command output on the executing user's screen. If the
							callback returns nothing (<code>nil</code>), then the command will
							run normally.
						</p>
						<div class="custom-block warning">
							<p class="custom-block-title">Security Warning</p>
							<p>
								Commands will be blocked from running in-game unless you
								configure at least one BeforeRun hook.
							</p>
						</div>
						<p>
							As a quick way to register hooks on both the server and the
							client, you can make a folder for your hooks, with module scripts
							in them which return a function. Similar to Types, if you call
							<code>Cmdr:RegisterHooksIn(yourFolderHere)</code> from the server,
							Cmdr will load all ModuleScripts in the folder on the server and
							the client, so you only need to write your code once.
						</p>
						<div class="language-lua line-numbers-mode">
							<pre
								class="language-lua"
							><code><span class="token comment">-- A ModuleScript inside your hooks folder.</span>
<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>registry<span class="token punctuation">)</span>
	registry<span class="token punctuation">:</span><span class="token function">RegisterHook</span><span class="token punctuation">(</span><span class="token string">&quot;BeforeRun&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
		<span class="token keyword">if</span> context<span class="token punctuation">.</span>Group <span class="token operator">==</span> <span class="token string">&quot;DefaultAdmin&quot;</span> <span class="token keyword">and</span> context<span class="token punctuation">.</span>Executor<span class="token punctuation">.</span>UserId <span class="token operator">~=</span> game<span class="token punctuation">.</span>CreatorId <span class="token keyword">then</span>
			<span class="token keyword">return</span> <span class="token string">&quot;You don't have permission to run this command&quot;</span>
		<span class="token keyword">end</span>
	<span class="token keyword">end</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
							<div class="line-numbers-wrapper">
								<span class="line-number">1</span><br /><span
									class="line-number"
									>2</span
								><br /><span class="line-number">3</span><br /><span
									class="line-number"
									>4</span
								><br /><span class="line-number">5</span><br /><span
									class="line-number"
									>6</span
								><br /><span class="line-number">7</span><br /><span
									class="line-number"
									>8</span
								><br />
							</div>
						</div>
						<h2 id="afterrun">
							<a href="#afterrun" class="header-anchor">#</a> AfterRun
						</h2>
						<p>
							The AfterRun hook runs, as its name implies, directly after a
							command is run. The callback is also passed a CommandContext, but
							the <code>Response</code> property is now available, which is the
							response from the command implementation (what would normally be
							displayed after running the command).
						</p>
						<p>
							If this callback returns a string, then it will replace the normal
							response on the user's screen. If the callback returns nothing
							(<code>nil</code>), then the response will be shown normally.
						</p>
						<p>
							This hook is most useful for logging. Since we don't want to add
							this hook on the client in this example, we can just require the
							server version of Cmdr and add this hook directly right here (as
							opposed to what we did in the BeforeRun example, which adds the
							hook to the client as well):
						</p>
						<div class="language-lua line-numbers-mode">
							<pre
								class="language-lua"
							><code>Cmdr<span class="token punctuation">.</span>Registry<span class="token punctuation">:</span><span class="token function">RegisterHook</span><span class="token punctuation">(</span><span class="token string">&quot;AfterRun&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
  <span class="token function">print</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>Response<span class="token punctuation">)</span> <span class="token comment">-- see the actual response from the command execution</span>
  <span class="token keyword">return</span> <span class="token string">&quot;Returning a string from this hook replaces the response message with this text&quot;</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>
</code></pre>
							<div class="line-numbers-wrapper">
								<span class="line-number">1</span><br /><span
									class="line-number"
									>2</span
								><br /><span class="line-number">3</span><br /><span
									class="line-number"
									>4</span
								><br />
							</div>
						</div>
					</div>
					<footer class="page-edit">
						<!---->
						<div class="last-updated">
							<span class="prefix">Last Updated:</span>
							<span class="time">8/14/2020, 6:30:58 PM</span>
						</div>
					</footer>
					<div class="page-nav">
						<p class="inner">
							<span class="prev">
								←
								<a href="/Cmdr/legacy/guide/Types.html" class="prev">
									Types
								</a></span
							>
							<span class="next"
								><a href="/Cmdr/legacy/guide/NetworkEventHandlers.html">
									Network Event Handlers
								</a>
								→
							</span>
						</p>
					</div>
				</main>
			</div>
			<div class="global-ui"></div>
		</div>
		<script src="/Cmdr/legacy/assets/js/app.af2239d2.js" defer></script>
		<script src="/Cmdr/legacy/assets/js/4.68a2b75a.js" defer></script>
		<script src="/Cmdr/legacy/assets/js/22.a05771ae.js" defer></script>
	</body>
</html>
