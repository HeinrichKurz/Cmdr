"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[849],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),l=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},d=function(e){var t=l(e.components);return r.createElement(s.Provider,{value:t},e.children)},m="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),m=l(n),u=a,h=m["".concat(s,".").concat(u)]||m[u]||p[u]||o;return n?r.createElement(h,c(c({ref:t},d),{},{components:n})):r.createElement(h,c({ref:t},d))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,c=new Array(o);c[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[m]="string"==typeof e?e:a,c[1]=i;for(var l=2;l<o;l++)c[l]=n[l];return r.createElement.apply(null,c)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},34730:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var r=n(87462),a=(n(67294),n(3905));const o={},c="Network event handlers",i={unversionedId:"networkeventhandlers",id:"networkeventhandlers",title:"Network event handlers",description:"Some commands that run on the server might need to also do something on the client, or on every client. Network event handlers are callback functions that you can set to run when a server command sends a message back to the client. Only one handler can be set to a certain event at a time, so it's possible to change the handler for a specific event without needing to re-implement the entire command yourself.",source:"@site/docs/14-networkeventhandlers.md",sourceDirName:".",slug:"/networkeventhandlers",permalink:"/Cmdr/beta/docs/networkeventhandlers",draft:!1,editUrl:"https://github.com/evaera/cmdr/edit/master/docs/14-networkeventhandlers.md",tags:[],version:"current",sidebarPosition:14,frontMatter:{},sidebar:"defaultSidebar",previous:{title:"Meta-commands",permalink:"/Cmdr/beta/docs/metacommands"},next:{title:"Best practice",permalink:"/Cmdr/beta/docs/advanced/bestpractice"}},s={},l=[],d={toc:l},m="wrapper";function p(e){let{components:t,...n}=e;return(0,a.kt)(m,(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"network-event-handlers"},"Network event handlers"),(0,a.kt)("p",null,"Some commands that run on the server might need to also do something on the client, or on every client. Network event handlers are callback functions that you can set to run when a server command sends a message back to the client. Only one handler can be set to a certain event at a time, so it's possible to change the handler for a specific event without needing to re-implement the entire command yourself."),(0,a.kt)("p",null,"For example, consider the default ",(0,a.kt)("inlineCode",{parentName:"p"},"announce")," command, which creates a message on every player's screen. By default, this creates a system chat message with the given text, because Cmdr has a default event handler for the ",(0,a.kt)("inlineCode",{parentName:"p"},'"Message"')," event, which the ",(0,a.kt)("inlineCode",{parentName:"p"},"announce")," command broadcasts."),(0,a.kt)("p",null,"If you wanted to display announcements some other way, you could just override the default event handler:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-lua"},'CmdrClient:HandleEvent("Message", function (text, player)\n    print("Announcement from", player.Name, text)\nend)\n')),(0,a.kt)("p",null,"You can send events from your own commands on the server (or to the local player if in a client-only command) by using ",(0,a.kt)("inlineCode",{parentName:"p"},"context:SendEvent(player, ...)")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"context:BroadcastEvent(...)"),". The built-in ",(0,a.kt)("inlineCode",{parentName:"p"},"context:Reply(text)")," method actually uses ",(0,a.kt)("inlineCode",{parentName:"p"},"SendEvent")," under the hood, whose default handler on the client (",(0,a.kt)("inlineCode",{parentName:"p"},"AddLine"),") is set to just add a new line to the console window with the given text."))}p.isMDXComponent=!0}}]);